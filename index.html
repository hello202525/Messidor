<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Messidor</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@300;400&display=swap" rel="stylesheet">

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    :root { --ink:#000; --accent:#0b5c61; --max:800px; --top:52px; }

    body { font-family:'Cormorant Garamond',serif; color:var(--ink); text-align:center; line-height:1.45; background:#fff; }
    main { max-width:var(--max); margin:var(--top) auto 0; padding:0 16px; }
    #hero { width:200px; height:auto; object-fit:cover; display:block; margin:0 auto 22px; }
    h1 { font-weight:400; font-size:clamp(40px,6vw,60px); letter-spacing:.2px; margin-bottom:6px; }
    nav { font-size:clamp(10px,2.4vw,22px); margin:15px 0 20px; }
    nav a { color:var(--ink); text-decoration:none; padding:0 8px; }
    .divider { width:60%; margin:8px auto 0; border:none; border-top:1.5px solid #000; }
    #tagline { position:fixed; left:50%; bottom:calc(24px + env(safe-area-inset-bottom)); transform:translateX(-50%); font-style:italic; font-size:clamp(9px,2.1vw,20px); color:var(--ink); pointer-events:none; }

    html.x-splash-active { overflow:hidden; }
    #x-splash { position:fixed; inset:0; z-index:9999; background:#fff; display:grid; place-items:center; opacity:1; transition:opacity .28s ease; }
    #x-splash.hide { opacity:0; pointer-events:none; }
    #x-splash svg { width:min(26vmin,160px); height:auto; }
    #x-splash text { fill:var(--ink); fill-opacity:.9; font-family:'Cormorant Garamond',serif; font-weight:400; }
    #x-splash .draw1 { animation:dash 680ms ease forwards; }
    #x-splash .draw2 { animation:dash 700ms ease forwards 120ms; }
    @keyframes dash { to { stroke-dashoffset:0; } }

    @media (prefers-reduced-motion: reduce){
      #x-splash { transition:none; }
      #x-splash .draw1, #x-splash .draw2 { animation:none; }
    }
  </style>
</head>
<body>

  <script>
  (function(){
    document.documentElement.classList.add('x-splash-active');
    const s = document.createElement('div');
    s.id = 'x-splash';
    s.innerHTML =
      '<svg viewBox="0 0 100 100" aria-hidden="true" focusable="false">'
    + '  <defs>'
    + '    <mask id="rev">'
    + '      <rect width="100" height="100" fill="black"/>'
    + '      <line id="l1" x1="12" y1="76" x2="88" y2="22" stroke="white" stroke-width="22" stroke-linecap="round"/>'
    + '      <line id="l2" x1="12" y1="24" x2="88" y2="86" stroke="white" stroke-width="22" stroke-linecap="round"/>'
    + '    </mask>'
    + '  </defs>'
    + '  <text x="50" y="54" text-anchor="middle" dominant-baseline="middle" font-size="72" mask="url(#rev)">X</text>'
    + '</svg>';
    document.body.prepend(s);

    const l1 = s.querySelector('#l1');
    const l2 = s.querySelector('#l2');
    function prep(line){
      const x1 = line.x1.baseVal.value, y1 = line.y1.baseVal.value;
      const x2 = line.x2.baseVal.value, y2 = line.y2.baseVal.value;
      const L = Math.hypot(x2-x1, y2-y1);
      line.style.strokeDasharray = L;
      line.style.strokeDashoffset = L;
    }
    prep(l1); prep(l2);
    l1.classList.add('draw1');
    l2.classList.add('draw2');

    let done = false;
    function hide(){
      if(done) return; done = true;
      s.classList.add('hide');
      document.documentElement.classList.remove('x-splash-active');
      s.addEventListener('transitionend', ()=>s.remove(), {once:true});
    }

    const minMs = 1200, maxMs = 2200;
    let minElapsed = false, ready = false;
    setTimeout(()=>{ minElapsed = true; if(ready) hide(); }, minMs);
    setTimeout(hide, maxMs);

    if (document.fonts && document.fonts.ready) {
      document.fonts.ready.then(()=>{ ready = true; if(minElapsed) hide(); });
    } else {
      window.addEventListener('load', ()=>{ ready = true; if(minElapsed) hide(); }, {once:true});
    }
  })();
  </script>

  <main>
    <img id="hero" src="TheHarvesters.jpg" alt="The Harvesters" />
    <h1>Messidor</h1>
    <nav><a href="mailto:eric_li1@college.harvard.edu">Contact</a></nav>
    <hr class="divider" />
  </main>

  <footer id="tagline">"Cultivating attention."</footer>

  <script>
    const icon = document.createElement('link');
    icon.rel = 'icon';
    icon.type = 'image/png';
    icon.sizes = '32x32';
    document.head.appendChild(icon);

    const src = 'TheHarvesters.jpg';
    const cvs = document.createElement('canvas'); cvs.width = cvs.height = 32;
    const ctx = cvs.getContext('2d');
    const img = new Image(); img.crossOrigin = 'anonymous';
    img.onload = () => {
      const w = img.naturalWidth || img.width, h = img.naturalHeight || img.height;
      const scale = Math.max(32 / w, 32 / h);
      const dw = w * scale, dh = h * scale;
      const dx = (32 - dw) / 2, dy = (32 - dh) / 2;
      ctx.clearRect(0,0,32,32); ctx.drawImage(img, dx, dy, dw, dh);
      icon.href = cvs.toDataURL('image/png');

      const icon16 = document.createElement('link');
      icon16.rel = 'icon';
      icon16.type = 'image/png';
      icon16.sizes = '16x16';
      const c16 = document.createElement('canvas'); c16.width = c16.height = 16;
      const x16 = c16.getContext('2d'); x16.drawImage(cvs, 0, 0, 16, 16);
      icon16.href = c16.toDataURL('image/png');
      document.head.appendChild(icon16);
    };
    img.src = src;
  </script>
</body>
</html>
